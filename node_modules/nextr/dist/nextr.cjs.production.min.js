"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(n){return"function"==typeof n},t=function(){function t(n){var t=n.fn,i=n.ancestor,e=n.onError,r=n.onSuccess,s=n.onFinish;this.prevSibling=null,this.nextSibling=null,this.fn=t,this.ancestor=i,this.onError=e,this.onSuccess=r,this.onFinish=s}var i=t.prototype;return i.run=function(t){var i=this,e=this.fn.length,r=t.concat({abort:function(){n(i.onError)&&i.onError(),n(i.onFinish)&&i.onFinish()},back:function(){i.prevSibling&&i.prevSibling.run(t)},resume:function(){i.prevSibling&&i.prevSibling.upstream(t)},next:function(){i.nextSibling?i.nextSibling.run(t):(n(i.onSuccess)&&i.onSuccess(),n(i.onFinish)&&i.onFinish())}});this.nextSibling?r=r.slice(-e):1===e&&(r=r.slice(-2,-1));try{this.fn.apply(this,r)}catch(n){if(/Co Exception/.test(n.message))throw n;throw function(n,t){var i=t.message,e=n.name||String(n).slice(0,10);return t.message="[Co Exception "+e+"]: "+i,t}(this.fn,n)}},i.setPrevSibling=function(n){this.prevSibling=n},i.setNextSibling=function(n){this.nextSibling=n},i.upstream=function(n){this.prevSibling?this.prevSibling.upstream(n):this.run(n)},t}();exports.Co=function(){function n(n){this.current=null,this.ancestor=null,this.ctx=n?n.ctx:{}}var i=n.prototype;return i.useFn=function(n,i){var e=new t({fn:n,ancestor:i});this.ancestor||(this.ancestor=e),this.current&&(this.current.setNextSibling(e),e.setPrevSibling(this.current)),this.current=e},i.useOne=function(t){if(t instanceof n)for(var i=t.ancestor;i;)this.useFn(i.fn,this.ancestor),i=i.nextSibling;else"function"==typeof t&&this.useFn(t,this.ancestor)},i.use=function(){for(var n=this,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return i.forEach((function(t){return n.useOne(t)})),this},i.start=function(){var n=this.ctx;"function"==typeof n&&(n=this.ctx.call(null));for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return this.ancestor&&this.ancestor.run(i.concat(n)),n},n}();
//# sourceMappingURL=nextr.cjs.production.min.js.map
